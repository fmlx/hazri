<head>
  <title>simple</title>
  
<SCRIPT TYPE="text/JavaScript">
    function validateHhMm12(inputField) {
	   if(inputField == null)
	      return true;
		  
        var isValid = /^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/.test(inputField.value);

        if (isValid) {
            inputField.style.backgroundColor = '#bfa';
        } else {
            inputField.style.backgroundColor = '#fba';
        }

        return isValid;
    }
	
	 function validateHhMm(inputField) {
	    if(inputField == null)
	      return true;
		
        var isValid = /^(0?[1-9]|1[012])(:[0-5]\d) $/.test(inputField.value);

        if (isValid) {
            inputField.style.backgroundColor = '#bfa';
        } else {
            inputField.style.backgroundColor = '#fba';
        }

        return isValid;
    }
</SCRIPT>
</head>

<body>
 <div class="container">
<!-- {{>loginModal}} -->

	<div class="clearfix">
		<h3 class="text-center"  style="float: left; position: relative; top:0px; left: 0px;">Hazri Sheet - Formulatrix</h3>
		<div style="float: right; position: relative; top: 10px; right: 12px;"> {{> loginButtons}} </div>
	 </div>
	  
{{#if currentUser}}
    {{#if isAdmin currentUser}}
		<select name="allusers" id="allusers">
		 {{#each getRegisteredUsers}}
			<option value={{this._id}}>{{this.username}}</option>
		{{/each}}
		</select>
	
	
	  <button class="btn btn-info" id="download">Download as CSV</button>
	<br>
	{{/if}}

<div class="clearfix">
  <h2 style="float: left;left: -50%;" > {{selectedMonth}} - {{selectedYear}}</h2>
  <button value="Next" id="next" class="btn btn-primary" style="float: right; position: relative; top: 10px; right: 10px;">Next</button>
  <button value="Previous" id="prev" class="btn btn-primary" style="float: right; position: relative; top: 10px; right: 12px;" >Previous</button>
 </div>

<br>
	
	<div class="table"> 
		<h3 class="bg-success">
			<div>Date</div>
			<div></div>
			<div>In</div>
			<div>Out</div>
			<div>Break</div>
			<div>Remarks</div>
			<div>Worked</div>
			
		</h3>	

			{{#each getDaysInParticularMonth getSelectedDate}} 
				{{>calendarRow}}
		    {{/each}}
	  </div>
	  
	  <hr>
	  <div style="float: right; position: relative; top: 0px; right: 12px; bottom: 20px">   <h4>Hours work in month = {{getMonthHours}} </h4> </div>
	  <br> <br> <br>
{{/if}}

 </div>
<br> <br>
</body>

<template name="calendarRow">
  <form class="new-task1 {{#if equals this.day 0}}gray{{/if}}  {{#if equals this.day 6}}gray{{/if}} {{#if isToday this.date this.month this.year}}today{{/if}}">
	<div><span class="text">{{this.dayname}}</span> </div>
	<div><span class="text"  style="float: left; position: relative; top:5px; left: -20px;">{{this.date}}-{{this.month}}-{{this.year}}</span> </div>

	<div><input id="clockpick" type="text"  name="In" placeholder="hh:mm am/pm" value="{{this.timeIn}}" onchange="validateHhMm12(this);"></div>
	<div><input type="text" name="Out" placeholder="hh:mm am/pm" value="{{this.timeOut}}"  onchange="validateHhMm12(this);"/></div>
	<div><input type="text" name="Break" placeholder="hh:mm" value="{{this.breakTime}}"  onchange="validateHhMm(this);"/></div>
	<div><input type="text" name="Remarks" placeholder="" value="{{this.remarks}}" /></div>
	<div><span class="text">{{this.timediff}} </span> {{#if equals this.day 0}} <span>  <strong> {{this.weeklyHours}} </strong></span>{{/if}}</div>
	<div><input type="submit" style="position: absolute; left: -9999px"/> </div>
  </form>
</template>

<template name="hello">
  <button>Click Me</button>
  <!--<p> {{getDaysInMonth}} </p> -->
</template>

